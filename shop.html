<!DOCTYPE html>
<html lang="pt-br">
<head>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";
        // Verifica se o usu√°rio est√° logado
        onAuthStateChanged(auth, (user) => {
            if (!user) {
                alert("Voc√™ precisa fazer login primeiro!");
                window.location.href = "login.html";
            } else {
                console.log("Usu√°rio logado:", user.uid);
                // Aqui voc√™ pode carregar produtos ou compras do Firestore
            }
        });
    
        // Fun√ß√£o de logout global
        window.logout = () => {
            signOut(auth).then(() => {
                window.location.href = "login.html";
            });
        };     
    </script>    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lojinha do Cocadinha, Vyny e Leti</title>
    <link rel="stylesheet" href="style.css">

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, arrayUnion, arrayRemove } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";
      
        const firebaseConfig = {
            apiKey: "AIzaSyD4KGUp6aMFskr7zUd2JzXJNU4bk0K6gQA",
            authDomain: "cocadinha-c1d1c.firebaseapp.com",
            projectId: "cocadinha-c1d1c",
            storageBucket: "cocadinha-c1d1c.firebasestorage.app",
            messagingSenderId: "816759287937",
            appId: "1:816759287937:web:ed270f3374bc8f3e1d1d80",
            measurementId: "G-R91K664RC6"
        };
      
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
      
        // Exemplo de login
        window.loginUser = async function (email, senha) {
          try {
            const userCredential = await signInWithEmailAndPassword(auth, email, senha);
            const user = userCredential.user;
            console.log("Logado como", user.email);
            // Redirecionar ou carregar dados
          } catch (error) {
            alert("Falha no login");
          }
        };
      </script>
      
</head>

<div class="top-bar">
    <button class="toggle-sidebar-btn" onclick="toggleSidebar()">‚ãÆ</button>
    <span class="top-bar-title">üéÄ Lojinha do Cocadinha, Vyny e Leti üéÄ</span>
    <button onclick="logout()" class="logout-button">Sair</button>
</div>

<button class="toggle-sidebar-btn" onclick="toggleSidebar()">‚ãÆ</button>

<body>
    <div id="sidebar" class="sidebar">
        <button class="close-sidebar-btn" onclick="toggleSidebar()">‚úñ</button>
        <br><br>
        <h3>Filtros</h3>

        <label for="price-filter">Pre√ßo M√≠nimo:</label><br>
        <input type="text" id="min-price" placeholder="0">
        <br>
        <label for="price-filter">Pre√ßo M√°ximo:</label><br>
        <input type="text" id="max-price" placeholder="1000">
        <br><br>

        <button id="toggle-purchases" class="toggle-btn" onclick="togglePurchases()">üõçÔ∏è Minhas Compras</button>

        <br><br>

    <p>Escolha um presente, clique em "J√° comprei" e pronto! Se mudar de ideia, pode cancelar.</p>

    <br><br>
    
        <button class="toggle-btn" onclick="toggleSuggestion()">üéÅ Sugerir Presente</button>
        <div id="suggestion-box" style="display: none;">
            <p>Achou que a gente deixou passar algum presente essencial? Sem problema!</p>
            <p>Nos mande um pix! O pix da Let√≠cia √© o celular dela (que voc√™ deve ter). Adicione na descri√ß√£o do pix sua sugest√£o!</p>
        </div>
        <br><br><br><br><br>
        <button onclick="help()" class="toggle-btn">Ajuda</button>
        <button onclick="logout()" class="toggle-btn">Sair</button>

    </div>

    <div id="product-container"></div>

    <script src="script.js"></script>
</body>
</html>